<template name="stays">
  <div class="container top-margin">
    <div class="row">

      <!-- New stay offer -->
      <div class="col-md-3">
        <div class="panel panel-default js-add-stay" style="cursor: pointer;">
          <div class="panel-heading">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            <span> New stay offer</span>
          </div>
          <div class="panel-body">
            <span> Post your stay offer here so that others can see </span>
          </div>
        </div>
      </div>

      {{#each stays}}

      <div class="col-md-3">
        <div class="panel panel-default stay-card" doc_id="{{_id}}" style="cursor: pointer;">

          <div class="panel-heading">
            <!--div class="panel-heading" style="cursor: pointer;"-->
            <!--button type="button" class="pull-right close offer-remove">
              <span class="glyphicon glyphicon-trash"></span>
              <span class="sr-only">Delete offer</span>
            </button-->
            <span> {{address.city}} {{address.postalCode}} </span>
            <span class="glyphicon glyphicon-pencil pull-right contact-author" aria-hidden="true"></span>
          </div>

          <div class="panel-body">
            <span>Start Date: {{dateFormat(startDate)}} </span>
            <br>
            <span>End Date: {{dateFormat(endDate)}} </span>
          </div>
        </div>
      </div>

      {{/each}}
    </div>
  </div>

  <div class="map-container">
    {{> googleMap name="map" options=mapOptions}}
  </div>

  <!-- Modal to display form to post new stay -->
  <div id="messageModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            <span class="glyphicon glyphicon-remove"></span>
            <span class="sr-only">Close</span>
          </button>
          <h4 class="modal-title">Send message to the author:</h4>
        </div>

        <div class="modal-body">
          <input id="messageInputBox" type="text" class="form-control" placeholder="Input text">
        </div>

        <div class="modal-footer">
          <button id="messageInputSend" type="button" class="btn btn-info" data-dismiss="modal">Send</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal to display form to post new stay -->
  <div id="stayModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            <span class="glyphicon glyphicon-remove"></span>
            <span class="sr-only">Close</span>
          </button>
          <h4 class="modal-title">Please fill out the form to post offer for stay</h4>
        </div>

        <div class="modal-body">
          {{> quickForm id="stayForm" schema="Schema.Stay" collection="Stays" type="insert" omitFields="createdAt, authorId" template="bootstrap3-horizontal" label-class="col-sm-3" input-col-class="col-sm-9" }}
        </div>
      </div>
    </div>
  </div>


</template>